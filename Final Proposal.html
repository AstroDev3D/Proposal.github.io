<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A Question for You ‚ù§Ô∏è</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #fdf2f8 0%, #ffe4e6 100%);
            overflow: hidden; /* Prevent scrolling */
            touch-action: none; /* Prevent zooming/scrolling on mobile */
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
        }
        
        .title-font {
            font-family: 'Fredoka One', cursive;
            letter-spacing: 1px;
        }

        /* Floating Hearts Background Animation */
        .floating-heart {
            position: absolute;
            color: #fb7185;
            opacity: 0;
            z-index: 0;
            animation: float-up linear forwards;
            pointer-events: none;
            user-select: none;
        }

        @keyframes float-up {
            0% {
                transform: translateY(100vh) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-20vh) scale(1.5) rotate(360deg);
                opacity: 0;
            }
        }

        /* Button Animations */
        #noBtn {
            position: absolute; /* Changed to absolute for easier initial positioning */
            transition: all 0.2s ease; /* Faster transition for snappier feel */
            z-index: 50; 
        }

        .pulse-btn {
            animation: pulse-grow 2s infinite;
        }
        @keyframes pulse-grow {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(244, 63, 94, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(244, 63, 94, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(244, 63, 94, 0); }
        }

        /* Page Transitions */
        .page {
            position: absolute;
            inset: 0;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease, transform 0.5s ease;
            opacity: 0;
            pointer-events: none;
            z-index: 10;
        }

        .page.active {
            display: flex;
            opacity: 1;
            pointer-events: all;
            transform: scale(1);
        }

        .page.hidden-left {
            opacity: 0;
            transform: translateX(-100px) scale(0.9);
            pointer-events: none;
        }

        /* GIF Container */
        .gif-container {
            width: 250px;
            height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
        }
        .gif-container img {
            max-width: 100%;
            max-height: 100%;
            border-radius: 12px;
            filter: drop-shadow(0 10px 15px rgba(244, 63, 94, 0.2));
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @media (max-width: 600px) {
            .gif-container {
                width: 200px;
                height: 200px;
            }
        }

        /* Verse Text Styling */
        #pleadingText {
            min-height: 4rem; /* Fixed height to prevent jumping */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        /* Hidden Preloader */
        #preloader {
            position: absolute;
            width: 0;
            height: 0;
            overflow: hidden;
            opacity: 0;
        }

    </style>
</head>
<body>

    <!-- Dynamic Background Layer -->
    <div id="hearts-container" class="absolute inset-0 overflow-hidden pointer-events-none"></div>

    <!-- Hidden Preloader for Images -->
    <div id="preloader"></div>

    <!-- ================= PAGE 1: INTRO ================= -->
    <div id="page1" class="page active text-center p-6">
        <div class="gif-container mx-auto">
            <!-- Cute bear holding a letter -->
            <img src="https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif" alt="Mail Bear">
        </div>
        
        <h1 class="text-4xl md:text-5xl text-rose-500 mb-4 title-font drop-shadow-sm">
            Hi <span id="namePlaceholder">Love</span>!
        </h1>
        <p class="text-lg text-rose-800 font-semibold mb-8 max-w-xs mx-auto leading-relaxed">
            I have a very special question I've been meaning to ask you...
        </p>
        
        <button onclick="goToPage(2)" class="bg-rose-500 hover:bg-rose-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition active:scale-95 text-xl flex items-center gap-2 mx-auto cursor-pointer z-50">
            <span>üíå</span> Open It
        </button>
    </div>

    <!-- ================= PAGE 2: THE QUESTION ================= -->
    <div id="page2" class="page text-center p-4 w-full h-full relative overflow-hidden">
        
        <!-- Dynamic Bear GIF -->
        <div class="gif-container mx-auto z-10">
            <img id="mainGif" src="https://media.giphy.com/media/CT5Ye7uVJLFtu/giphy.gif" alt="Cute Bear">
        </div>

        <h1 id="questionText" class="text-3xl md:text-5xl text-rose-600 mb-4 title-font transition-all duration-300 z-10">
            Will you be my Valentine? üåπ
        </h1>
        
        <!-- Pleading Text (Dynamic Verse) -->
        <div class="z-10 w-full max-w-md mx-auto mb-8">
             <p id="pleadingText" class="text-rose-500 text-lg md:text-xl font-bold transition-opacity duration-300 opacity-100 px-4">
                Please? ü•∫ Don't break my heart!
            </p>
        </div>

        <!-- Buttons Container -->
        <div class="relative w-full h-32 flex justify-center items-start gap-6 z-20">
            
            <!-- YES Button -->
            <button id="yesBtn" onclick="acceptProposal()" class="pulse-btn z-30 bg-rose-500 hover:bg-rose-600 text-white font-bold py-3 px-10 rounded-full shadow-xl text-2xl transition-all transform hover:scale-110 cursor-pointer">
                YES! ‚ù§Ô∏è
            </button>
            
            <!-- NO Button (The Runner) -->
            <!-- Initial static position, script handles movement -->
            <button id="noBtn" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-full shadow-md text-sm whitespace-nowrap cursor-pointer border-2 border-white/50 backdrop-blur-sm" style="position: relative;">
                No
            </button>
        </div>
    </div>

    <!-- ================= PAGE 3: SUCCESS ================= -->
    <div id="page3" class="page text-center p-6">
        <div class="gif-container mx-auto">
            <!-- Kissing/Hugging Bears -->
            <img src="https://media.giphy.com/media/T86i6yDyOYz7J6dPhf/giphy.gif" alt="Happy Bears">
        </div>
        
        <h1 class="text-4xl md:text-5xl text-rose-600 mb-4 title-font">
            YAAAY!!! üéâ
        </h1>
        <p class="text-xl text-rose-800 font-semibold mb-2">
            I knew you'd say yes! ‚ù§Ô∏è
        </p>
        <p class="text-md text-rose-500 italic mb-8">
            Can't wait to see you!
        </p>
        
        <div class="p-4 bg-white/50 backdrop-blur-sm rounded-xl border border-rose-200 shadow-sm max-w-sm mx-auto">
            <p class="text-sm text-gray-500">üì∏ Screenshot this and send it to me!</p>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const CONFIG = {
            name: "Love" 
        };
        
        const nameEl = document.getElementById('namePlaceholder');
        if (nameEl) nameEl.innerText = CONFIG.name;

        // --- BACKGROUND ANIMATION ---
        function createFloatingHeart() {
            const container = document.getElementById('hearts-container');
            if (!container) return;
            
            const heart = document.createElement('div');
            heart.classList.add('floating-heart');
            heart.innerHTML = ['‚ù§Ô∏è', 'üíñ', 'üíù', 'üåπ', 'üå∏'][Math.floor(Math.random() * 5)];
            
            const startLeft = Math.random() * 100;
            const duration = Math.random() * 5 + 5;
            const size = Math.random() * 20 + 10;
            
            heart.style.left = `${startLeft}%`;
            heart.style.fontSize = `${size}px`;
            heart.style.animationDuration = `${duration}s`;
            
            container.appendChild(heart);
            setTimeout(() => { heart.remove(); }, duration * 1000);
        }
        setInterval(createFloatingHeart, 500);

        // --- PAGE NAVIGATION ---
        function goToPage(pageNumber) {
            const current = document.querySelector('.page.active');
            const next = document.getElementById(`page${pageNumber}`);
            
            if (current) {
                current.classList.remove('active');
                current.classList.add('hidden-left');
                setTimeout(() => {
                    current.style.display = 'none';
                    current.classList.remove('hidden-left');
                }, 500);
            }
            
            if (next) {
                setTimeout(() => {
                    next.style.display = 'flex';
                    void next.offsetWidth;
                    next.classList.add('active');
                    
                    // Specific logic for entering page 2 (reset text)
                    if(pageNumber === 2) {
                        resetPage2();
                    }
                }, 100);
            }
        }

        // --- INTERACTIVE LOGIC ---
        const mainGif = document.getElementById('mainGif');
        const pleadingText = document.getElementById('pleadingText');
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        
        // Matched Content Array (All verified Giphy links)
        const sadContent = [
            {
                gif: "https://media.giphy.com/media/d2lcHJTG5Tscg/giphy.gif",
                text: "My heart is breaking... üíî"
            },
            {
                gif: "https://media.giphy.com/media/v1.Y2lkPTZjMDliOTUyN3I5N2RxeXU2aDNjbDRsNTZkOWhobzh1Y3hrMjk3bm8wMmk5djI3MCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/HcAxkcimIhBocYQRc1/giphy.gif",
                text: "Even the kitty is crying... üòø"
            },
            {
                gif: "https://media.giphy.com/media/v1.Y2lkPTZjMDliOTUyMnJtdzFoYmNoeDJhMG50emZudmd4cnU4NWtyd2E2a2UxbGtrZ3pqNCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/lOlJWhF8JWrHj8a6m1/giphy.gif",
                text: "Look at this face! Please? ü•∫"
            },
            {
                gif: "https://media.giphy.com/media/L95W4wv8nnb9K/giphy.gif",
                text: "Don't leave me shocked! ‚ö°"
            },
            {
                gif: "https://media.giphy.com/media/v1.Y2lkPTZjMDliOTUyenhsM3JhZDh3c2YybTJreGt2d3Vjd3RjZnUya2E5MG5yZnR3YzBxeCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/4V3RuU0zSq1SC8Hh4x/giphy.gif",
                text: "I'm literally crying a river... üåä"
            },
            {
                gif: "https://media.giphy.com/media/v1.Y2lkPTZjMDliOTUydW41Z3l5eTg5aDBtdTQxdXpwaTNzNXJyOGIwYXV4NmZ2am1tbXZoOCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/wvYNSqBAMDVx8CEYkt/giphy.gif",
                text: "But... but I love you! üê•"
            }
        ];

        // Preload images to avoid flickering
        function preloadImages() {
            const preloader = document.getElementById('preloader');
            sadContent.forEach(item => {
                const img = new Image();
                img.src = item.gif;
                preloader.appendChild(img);
            });
        }
        window.addEventListener('load', preloadImages);

        function resetPage2() {
            // Reset to initial state
            if (mainGif) mainGif.src = "https://media.giphy.com/media/CT5Ye7uVJLFtu/giphy.gif";
            if (pleadingText) pleadingText.innerText = "Please? ü•∫ Don't break my heart!";
            
            // Reset button position
            noBtn.style.position = 'relative';
            noBtn.style.top = '0px';
            noBtn.style.left = '0px';
        }

        function moveButton() {
            // 1. Pick a random content object
            const randomIndex = Math.floor(Math.random() * sadContent.length);
            const randomContent = sadContent[randomIndex];
            
            // 2. Update GIF and Text
            if (mainGif) mainGif.src = randomContent.gif;
            if (pleadingText) {
                pleadingText.innerText = randomContent.text;
            }

            // 3. Move the button randomly
            // Switch to fixed positioning if not already
            if (noBtn.style.position !== 'fixed') {
                noBtn.style.position = 'fixed';
            }

            // Get viewport dimensions
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            const btnWidth = noBtn.offsetWidth;
            const btnHeight = noBtn.offsetHeight;
            
            // Padding to keep away from edges
            const padding = 20;

            // Calculate safe area (so it doesn't overlap excessively with YES button or Text)
            // Simple random logic for now covering whole screen
            const maxLeft = viewportWidth - btnWidth - padding;
            const maxTop = viewportHeight - btnHeight - padding;
            
            const newLeft = Math.max(padding, Math.random() * maxLeft);
            const newTop = Math.max(padding, Math.random() * maxTop);

            noBtn.style.left = `${newLeft}px`;
            noBtn.style.top = `${newTop}px`;
        }

        // Add event listeners
        if (noBtn) {
            // Desktop hover
            noBtn.addEventListener('mouseover', moveButton);
            
            // Mobile touch - Prevent default click behavior
            noBtn.addEventListener('touchstart', (e) => {
                e.preventDefault(); 
                moveButton();
            });
            
            // Click fallback
            noBtn.addEventListener('click', (e) => {
                e.preventDefault();
                moveButton();
            });
        }

        // --- SUCCESS LOGIC ---
        function acceptProposal() {
            if (typeof confetti === 'function') {
                confetti({
                    particleCount: 150,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#f43f5e', '#fb7185', '#fda4af']
                });
                
                const duration = 3000;
                const end = Date.now() + duration;

                (function frame() {
                    confetti({
                        particleCount: 5,
                        angle: 60,
                        spread: 55,
                        origin: { x: 0 },
                        colors: ['#f43f5e', '#fb7185']
                    });
                    confetti({
                        particleCount: 5,
                        angle: 120,
                        spread: 55,
                        origin: { x: 1 },
                        colors: ['#f43f5e', '#fb7185']
                    });

                    if (Date.now() < end) {
                        requestAnimationFrame(frame);
                    }
                }());
            }
            goToPage(3);
        }
    </script>
</body>
</html>


